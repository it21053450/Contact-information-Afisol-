<div class="container mt-4">
    <h3>Contact Information Management</h3>

    <!-- Alert Messages -->
    <div *ngIf="successMessage" class="alert alert-success alert-dismissible fade show" role="alert">
        {{ successMessage }}
        <button type="button" class="btn-close" (click)="successMessage = ''"></button>
    </div>
    
    <div *ngIf="errorMessage" class="alert alert-danger alert-dismissible fade show" role="alert">
        {{ errorMessage }}
        <button type="button" class="btn-close" (click)="errorMessage = ''"></button>
    </div>

    <!-- Contact Form -->
    <div class="card mb-4">
        <div class="card-header">
            <h5>Contact Form</h5>
        </div>
        <div class="card-body">
            <input type="hidden" [(ngModel)]="selectedContact.id" />

            <div class="mb-3">
                <label for="Name" class="form-label">Name <span style="color: red;">*</span></label>
                <input id="Name" 
                       class="form-control" 
                       [class.is-invalid]="validationErrors['name']"
                       placeholder="Enter full name"
                       [(ngModel)]="selectedContact.name" />
                <div *ngIf="validationErrors['name']" class="invalid-feedback d-block">
                    {{ validationErrors['name'] }}
                </div>
            </div>

            <div class="mb-3">
                <label for="Address" class="form-label">Address</label>
                <input id="Address" 
                       class="form-control" 
                       placeholder="Enter address"
                       [(ngModel)]="selectedContact.address" />
            </div>

            <div class="mb-3">
                <label for="Email" class="form-label">Email</label>
                <input id="Email" 
                       type="email"
                       class="form-control" 
                       placeholder="Enter email address"
                       [(ngModel)]="selectedContact.email" />
            </div>

            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="Telephone" class="form-label">Telephone</label>
                    <input id="Telephone" 
                           class="form-control" 
                           placeholder="Enter telephone"
                           [(ngModel)]="selectedContact.tel">
                </div>

                <div class="col-md-6">
                    <label for="Mobile" class="form-label">Mobile <span style="color: red;">*</span></label>
                    <input id="Mobile" 
                           class="form-control" 
                           [class.is-invalid]="validationErrors['mobile']"
                           placeholder="Enter mobile number"
                           [(ngModel)]="selectedContact.mobile">
                    <div *ngIf="validationErrors['mobile']" class="invalid-feedback d-block">
                        {{ validationErrors['mobile'] }}
                    </div>
                </div>
            </div>

            <div class="mb-3">
                <label for="Country" class="form-label">Country <span style="color: red;">*</span></label>
                <select id="Country" 
                        class="form-control"
                        [class.is-invalid]="validationErrors['country']"
                        [(ngModel)]="selectedContact.country">
                    <option value="">-- Select Country --</option>
                    <option value="Sri Lanka">Sri Lanka</option>
                    <option value="India">India</option>
                    <option value="United States">United States</option>
                    <option value="United Kingdom">United Kingdom</option>
                    <option value="Australia">Australia</option>
                    <option value="Canada">Canada</option>
                    <option value="New Zealand">New Zealand</option>
                </select>
                <div *ngIf="validationErrors['country']" class="invalid-feedback d-block">
                    {{ validationErrors['country'] }}
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-primary" (click)="newContact()">New</button>
                <button class="btn btn-success" (click)="save()">Save</button>
                <button class="btn btn-warning" (click)="update()" [disabled]="!selectedContact.id">Update</button>
                <button class="btn btn-danger" (click)="delete()" [disabled]="!selectedContact.id">Delete</button>
            </div>
        </div>
    </div>

    <hr />

    <!-- Contacts Table -->
    <div class="card">
        <div class="card-header">
            <h5>Contacts List</h5>
        </div>
        <div class="card-body table-responsive">
            <table class="table table-bordered table-hover" id="tbl">
                <thead class="table-dark">
                    <tr>
                        <th>Name</th>
                        <th>Address</th>
                        <th>Telephone</th>
                        <th>Mobile</th>
                        <th>Email</th>
                        <th>Country</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let contact of contacts">
                        <td>{{ contact.name }}</td>
                        <td>{{ contact.address }}</td>
                        <td>{{ contact.tel }}</td>
                        <td>{{ contact.mobile }}</td>
                        <td>{{ contact.email }}</td>
                        <td>{{ contact.country }}</td>
                        <td>
                            <button class="btn btn-sm btn-primary" (click)="selectContact(contact)">Edit</button>
                        </td>
                    </tr>
                    <tr *ngIf="contacts.length === 0">
                        <td colspan="7" class="text-center text-muted">No contacts found</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
